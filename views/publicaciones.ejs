<%- include("templates/header", {tituloWeb: 'Publicaciones'}) %>
   <h2 class="text-center mt-5"><%= title %></h2>
   <div class="mt-4 mb-4" style="background-color: rgba(0, 0, 0, 0.2);">
      <div class="container p-2">
         <% if (typeof publicaciones !== 'undefined') { %>
            <% if (publicaciones.length > 0) { %>
               <% publicaciones.forEach( publicacion => { %>
                  <div class="row ">
                     <div class="col p-2 d-flex flex-row justify-content-around mb-3" >
                        <div class="iamgen" style="width: 20rem">
                           <img src="../imagenes/<%= publicacion.Media %>" " class="card-img-top" alt="Media">
                        </div>
                        <div class=""style="width: 40rem; font-size: 18px;">
                           <div class="text-center mt-3"><a href="/ver-publicacion/<%= publicacion.Cedula %>/<%= rol %>" class="text-light" style="text-decoration: none; font-size: 25px;" ><%= publicacion.Titulo %></a></div>
                           <div class="">
                              <div class="text-light text-truncate col m-1" style="max-width: 500px;">Una breve descripci√≥n: <%= publicacion.Contenido %></div>
                              <div class="text-light text-truncate col m-1" style="max-width: 500px;">Fecha: <%= publicacion.CreatedDate %></div>
                              <div class="text-light col m-1">Autor: <%= publicacion.Nombre %> <%= publicacion.Apellido %></div>
                              <div class="text-light col m-1 mt-3 text-end"><i class="fa-solid fa-eye"></i> <%= publicacion.Contador %></div>
                           </div>
                        </div>
                        <div class="d-flex" style="align-content: space-around;">
                           <div class="nav flex-column justify-content-around">
                              <a href="/ver-publicacion/<%= publicacion.Cedula %>/<%= rol %>" class="btn btn-primary"> Ver </a>
                              <% if (rol == 'admin') { %>
                                 <a href="/editar-publicacion/<%= publicacion.Cedula %>/<%= rol %>" class="btn btn-warning"> Editar </a>
                                 <a href="/borrar-publicacion/<%= publicacion.Cedula %>/<%= rol %>" class="btn btn-danger"> Borrar </a>
                              <% } %>
                           </div>
                        </div>
                     </div>
                  </div>
               <% }) %>
            <% } else {%>
               <div class="container">No hay publicaciones creadas</div>
            <% } %>
         <% } else { %>
            <div class="container">No hay publicaciones para ver</div>
         <% } %>
      </div>
   </div>
   <nav aria-label="Page navigation example" style="margin-bottom: 6rem">
      <ul class="pagination justify-content-center">
         <% if (page > 0) { %>
            <li class="page-item"><a class="page-link" href="/publicaciones/admin?page=<%= page - 1 %>&size=<%= size %>">Previous</a></li>
         <% } %>
         <% for (let i = 0; i < totalPages; i++) { %>
            <li class="page-item"><a class="page-link" href="/publicaciones/admin?page=<%= i %>&size=<%= size %>"><%= i + 1 %> </a></li>
         <% } %> 
         <% if (page+1 < totalPages) { %>
            <li class="page-item"><a class="page-link" href="/publicaciones/admin?page=<%= page + 1 %>&size=<%= size %>">Next</a></li>
         <% } %>
      </ul>
    </nav>
</body>
<%- include("templates/footer") %>